<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE PatternSynonyms #-}</span><span>
</span><span id="line-2"></span><span>
</span><span id="line-3"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Unison.Codebase.Editor.SlurpComponent</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-4"></span><span>
</span><span id="line-5"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Unison.Prelude</span></span><span>
</span><span id="line-6"></span><span>
</span><span id="line-7"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Tuple</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">swap</span></span><span class="hs-special">)</span><span>
</span><span id="line-8"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Unison.Reference</span></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier">Reference</span></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-9"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Unison.UnisonFile.html"><span class="hs-identifier">Unison.UnisonFile</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.UnisonFile.Type.html#TypecheckedUnisonFile"><span class="hs-identifier">TypecheckedUnisonFile</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-10"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Map</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Map</span></span><span>
</span><span id="line-11"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Set</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Set</span></span><span>
</span><span id="line-12"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Unison.DataDeclaration</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">DD</span></span><span>
</span><span id="line-13"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Unison.Term</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Term</span></span><span>
</span><span id="line-14"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Unison.UnisonFile.html"><span class="hs-identifier">Unison.UnisonFile</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">UF</span></span><span>
</span><span id="line-15"></span><span>
</span><span id="line-16"></span><span class="hs-keyword">data</span><span> </span><span id="SlurpComponent"><span class="annot"><a href="Unison.Codebase.Editor.SlurpComponent.html#SlurpComponent"><span class="hs-identifier hs-var">SlurpComponent</span></a></span></span><span> </span><span id="local-6989586621681976660"><span class="annot"><a href="#local-6989586621681976660"><span class="hs-identifier hs-type">v</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-17"></span><span>  </span><span id="SlurpComponent"><span class="annot"><a href="Unison.Codebase.Editor.SlurpComponent.html#SlurpComponent"><span class="hs-identifier hs-var">SlurpComponent</span></a></span></span><span> </span><span class="hs-special">{</span><span> </span><span id="types"><span class="annot"><span class="annottext">SlurpComponent v -&gt; Set v
</span><a href="Unison.Codebase.Editor.SlurpComponent.html#types"><span class="hs-identifier hs-var hs-var">types</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Set</span></span><span> </span><span class="annot"><a href="#local-6989586621681976660"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">,</span><span> </span><span id="terms"><span class="annot"><span class="annottext">SlurpComponent v -&gt; Set v
</span><a href="Unison.Codebase.Editor.SlurpComponent.html#terms"><span class="hs-identifier hs-var hs-var">terms</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Set</span></span><span> </span><span class="annot"><a href="#local-6989586621681976660"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-18"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681976573"><span id="local-6989586621681976575"><span class="annot"><span class="annottext">SlurpComponent v -&gt; SlurpComponent v -&gt; Bool
(SlurpComponent v -&gt; SlurpComponent v -&gt; Bool)
-&gt; (SlurpComponent v -&gt; SlurpComponent v -&gt; Bool)
-&gt; Eq (SlurpComponent v)
forall v. Eq v =&gt; SlurpComponent v -&gt; SlurpComponent v -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: SlurpComponent v -&gt; SlurpComponent v -&gt; Bool
$c/= :: forall v. Eq v =&gt; SlurpComponent v -&gt; SlurpComponent v -&gt; Bool
== :: SlurpComponent v -&gt; SlurpComponent v -&gt; Bool
$c== :: forall v. Eq v =&gt; SlurpComponent v -&gt; SlurpComponent v -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span id="local-6989586621681976557"><span id="local-6989586621681976559"><span id="local-6989586621681976561"><span id="local-6989586621681976563"><span id="local-6989586621681976565"><span id="local-6989586621681976567"><span id="local-6989586621681976569"><span class="annot"><span class="annottext">Eq (SlurpComponent v)
Eq (SlurpComponent v)
-&gt; (SlurpComponent v -&gt; SlurpComponent v -&gt; Ordering)
-&gt; (SlurpComponent v -&gt; SlurpComponent v -&gt; Bool)
-&gt; (SlurpComponent v -&gt; SlurpComponent v -&gt; Bool)
-&gt; (SlurpComponent v -&gt; SlurpComponent v -&gt; Bool)
-&gt; (SlurpComponent v -&gt; SlurpComponent v -&gt; Bool)
-&gt; (SlurpComponent v -&gt; SlurpComponent v -&gt; SlurpComponent v)
-&gt; (SlurpComponent v -&gt; SlurpComponent v -&gt; SlurpComponent v)
-&gt; Ord (SlurpComponent v)
SlurpComponent v -&gt; SlurpComponent v -&gt; Bool
SlurpComponent v -&gt; SlurpComponent v -&gt; Ordering
SlurpComponent v -&gt; SlurpComponent v -&gt; SlurpComponent v
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
forall v. Ord v =&gt; Eq (SlurpComponent v)
forall v. Ord v =&gt; SlurpComponent v -&gt; SlurpComponent v -&gt; Bool
forall v. Ord v =&gt; SlurpComponent v -&gt; SlurpComponent v -&gt; Ordering
forall v.
Ord v =&gt;
SlurpComponent v -&gt; SlurpComponent v -&gt; SlurpComponent v
min :: SlurpComponent v -&gt; SlurpComponent v -&gt; SlurpComponent v
$cmin :: forall v.
Ord v =&gt;
SlurpComponent v -&gt; SlurpComponent v -&gt; SlurpComponent v
max :: SlurpComponent v -&gt; SlurpComponent v -&gt; SlurpComponent v
$cmax :: forall v.
Ord v =&gt;
SlurpComponent v -&gt; SlurpComponent v -&gt; SlurpComponent v
&gt;= :: SlurpComponent v -&gt; SlurpComponent v -&gt; Bool
$c&gt;= :: forall v. Ord v =&gt; SlurpComponent v -&gt; SlurpComponent v -&gt; Bool
&gt; :: SlurpComponent v -&gt; SlurpComponent v -&gt; Bool
$c&gt; :: forall v. Ord v =&gt; SlurpComponent v -&gt; SlurpComponent v -&gt; Bool
&lt;= :: SlurpComponent v -&gt; SlurpComponent v -&gt; Bool
$c&lt;= :: forall v. Ord v =&gt; SlurpComponent v -&gt; SlurpComponent v -&gt; Bool
&lt; :: SlurpComponent v -&gt; SlurpComponent v -&gt; Bool
$c&lt; :: forall v. Ord v =&gt; SlurpComponent v -&gt; SlurpComponent v -&gt; Bool
compare :: SlurpComponent v -&gt; SlurpComponent v -&gt; Ordering
$ccompare :: forall v. Ord v =&gt; SlurpComponent v -&gt; SlurpComponent v -&gt; Ordering
$cp1Ord :: forall v. Ord v =&gt; Eq (SlurpComponent v)
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span id="local-6989586621681976550"><span id="local-6989586621681976552"><span id="local-6989586621681976554"><span class="annot"><span class="annottext">Int -&gt; SlurpComponent v -&gt; ShowS
[SlurpComponent v] -&gt; ShowS
SlurpComponent v -&gt; String
(Int -&gt; SlurpComponent v -&gt; ShowS)
-&gt; (SlurpComponent v -&gt; String)
-&gt; ([SlurpComponent v] -&gt; ShowS)
-&gt; Show (SlurpComponent v)
forall v. Show v =&gt; Int -&gt; SlurpComponent v -&gt; ShowS
forall v. Show v =&gt; [SlurpComponent v] -&gt; ShowS
forall v. Show v =&gt; SlurpComponent v -&gt; String
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [SlurpComponent v] -&gt; ShowS
$cshowList :: forall v. Show v =&gt; [SlurpComponent v] -&gt; ShowS
show :: SlurpComponent v -&gt; String
$cshow :: forall v. Show v =&gt; SlurpComponent v -&gt; String
showsPrec :: Int -&gt; SlurpComponent v -&gt; ShowS
$cshowsPrec :: forall v. Show v =&gt; Int -&gt; SlurpComponent v -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-19"></span><span>
</span><span id="line-20"></span><span id="local-6989586621681976548"><span class="annot"><a href="Unison.Codebase.Editor.SlurpComponent.html#isEmpty"><span class="hs-identifier hs-type">isEmpty</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Unison.Codebase.Editor.SlurpComponent.html#SlurpComponent"><span class="hs-identifier hs-type">SlurpComponent</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681976548"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span></span><span>
</span><span id="line-21"></span><span id="isEmpty"><span class="annot"><span class="annottext">isEmpty :: SlurpComponent v -&gt; Bool
</span><a href="Unison.Codebase.Editor.SlurpComponent.html#isEmpty"><span class="hs-identifier hs-var hs-var">isEmpty</span></a></span></span><span> </span><span id="local-6989586621681976546"><span class="annot"><span class="annottext">SlurpComponent v
</span><a href="#local-6989586621681976546"><span class="hs-identifier hs-var">sc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set v -&gt; Bool
forall a. Set a -&gt; Bool
</span><span class="hs-identifier hs-var">Set.null</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SlurpComponent v -&gt; Set v
forall v. SlurpComponent v -&gt; Set v
</span><a href="Unison.Codebase.Editor.SlurpComponent.html#types"><span class="hs-identifier hs-var hs-var">types</span></a></span><span> </span><span class="annot"><span class="annottext">SlurpComponent v
</span><a href="#local-6989586621681976546"><span class="hs-identifier hs-var">sc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Set v -&gt; Bool
forall a. Set a -&gt; Bool
</span><span class="hs-identifier hs-var">Set.null</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SlurpComponent v -&gt; Set v
forall v. SlurpComponent v -&gt; Set v
</span><a href="Unison.Codebase.Editor.SlurpComponent.html#terms"><span class="hs-identifier hs-var hs-var">terms</span></a></span><span> </span><span class="annot"><span class="annottext">SlurpComponent v
</span><a href="#local-6989586621681976546"><span class="hs-identifier hs-var">sc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-22"></span><span>
</span><span id="line-23"></span><span id="local-6989586621681976543"><span class="annot"><a href="Unison.Codebase.Editor.SlurpComponent.html#empty"><span class="hs-identifier hs-type">empty</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621681976543"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Unison.Codebase.Editor.SlurpComponent.html#SlurpComponent"><span class="hs-identifier hs-type">SlurpComponent</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681976543"><span class="hs-identifier hs-type">v</span></a></span></span><span>
</span><span id="line-24"></span><span id="empty"><span class="annot"><span class="annottext">empty :: SlurpComponent v
</span><a href="Unison.Codebase.Editor.SlurpComponent.html#empty"><span class="hs-identifier hs-var hs-var">empty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set v -&gt; Set v -&gt; SlurpComponent v
forall v. Set v -&gt; Set v -&gt; SlurpComponent v
</span><a href="Unison.Codebase.Editor.SlurpComponent.html#SlurpComponent"><span class="hs-identifier hs-var">SlurpComponent</span></a></span><span> </span><span class="annot"><span class="annottext">Set v
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span> </span><span class="annot"><span class="annottext">Set v
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-25"></span><span>
</span><span id="line-26"></span><span id="local-6989586621681976541"><span class="annot"><a href="Unison.Codebase.Editor.SlurpComponent.html#difference"><span class="hs-identifier hs-type">difference</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621681976541"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Unison.Codebase.Editor.SlurpComponent.html#SlurpComponent"><span class="hs-identifier hs-type">SlurpComponent</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681976541"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Unison.Codebase.Editor.SlurpComponent.html#SlurpComponent"><span class="hs-identifier hs-type">SlurpComponent</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681976541"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Unison.Codebase.Editor.SlurpComponent.html#SlurpComponent"><span class="hs-identifier hs-type">SlurpComponent</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681976541"><span class="hs-identifier hs-type">v</span></a></span></span><span>
</span><span id="line-27"></span><span id="difference"><span class="annot"><span class="annottext">difference :: SlurpComponent v -&gt; SlurpComponent v -&gt; SlurpComponent v
</span><a href="Unison.Codebase.Editor.SlurpComponent.html#difference"><span class="hs-identifier hs-var hs-var">difference</span></a></span></span><span> </span><span id="local-6989586621681976539"><span class="annot"><span class="annottext">SlurpComponent v
</span><a href="#local-6989586621681976539"><span class="hs-identifier hs-var">c1</span></a></span></span><span> </span><span id="local-6989586621681976538"><span class="annot"><span class="annottext">SlurpComponent v
</span><a href="#local-6989586621681976538"><span class="hs-identifier hs-var">c2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set v -&gt; Set v -&gt; SlurpComponent v
forall v. Set v -&gt; Set v -&gt; SlurpComponent v
</span><a href="Unison.Codebase.Editor.SlurpComponent.html#SlurpComponent"><span class="hs-identifier hs-var">SlurpComponent</span></a></span><span> </span><span class="annot"><span class="annottext">Set v
</span><a href="#local-6989586621681976537"><span class="hs-identifier hs-var">types'</span></a></span><span> </span><span class="annot"><span class="annottext">Set v
</span><a href="#local-6989586621681976536"><span class="hs-identifier hs-var">terms'</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-28"></span><span>  </span><span id="local-6989586621681976537"><span class="annot"><span class="annottext">types' :: Set v
</span><a href="#local-6989586621681976537"><span class="hs-identifier hs-var hs-var">types'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SlurpComponent v -&gt; Set v
forall v. SlurpComponent v -&gt; Set v
</span><a href="Unison.Codebase.Editor.SlurpComponent.html#types"><span class="hs-identifier hs-var hs-var">types</span></a></span><span> </span><span class="annot"><span class="annottext">SlurpComponent v
</span><a href="#local-6989586621681976539"><span class="hs-identifier hs-var">c1</span></a></span><span> </span><span class="annot"><span class="annottext">Set v -&gt; Set v -&gt; Set v
forall a. Ord a =&gt; Set a -&gt; Set a -&gt; Set a
</span><span class="hs-operator hs-var">`Set.difference`</span></span><span> </span><span class="annot"><span class="annottext">SlurpComponent v -&gt; Set v
forall v. SlurpComponent v -&gt; Set v
</span><a href="Unison.Codebase.Editor.SlurpComponent.html#types"><span class="hs-identifier hs-var hs-var">types</span></a></span><span> </span><span class="annot"><span class="annottext">SlurpComponent v
</span><a href="#local-6989586621681976538"><span class="hs-identifier hs-var">c2</span></a></span><span>
</span><span id="line-29"></span><span>  </span><span id="local-6989586621681976536"><span class="annot"><span class="annottext">terms' :: Set v
</span><a href="#local-6989586621681976536"><span class="hs-identifier hs-var hs-var">terms'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SlurpComponent v -&gt; Set v
forall v. SlurpComponent v -&gt; Set v
</span><a href="Unison.Codebase.Editor.SlurpComponent.html#terms"><span class="hs-identifier hs-var hs-var">terms</span></a></span><span> </span><span class="annot"><span class="annottext">SlurpComponent v
</span><a href="#local-6989586621681976539"><span class="hs-identifier hs-var">c1</span></a></span><span> </span><span class="annot"><span class="annottext">Set v -&gt; Set v -&gt; Set v
forall a. Ord a =&gt; Set a -&gt; Set a -&gt; Set a
</span><span class="hs-operator hs-var">`Set.difference`</span></span><span> </span><span class="annot"><span class="annottext">SlurpComponent v -&gt; Set v
forall v. SlurpComponent v -&gt; Set v
</span><a href="Unison.Codebase.Editor.SlurpComponent.html#terms"><span class="hs-identifier hs-var hs-var">terms</span></a></span><span> </span><span class="annot"><span class="annottext">SlurpComponent v
</span><a href="#local-6989586621681976538"><span class="hs-identifier hs-var">c2</span></a></span><span>
</span><span id="line-30"></span><span>
</span><span id="line-31"></span><span id="local-6989586621681976534"><span class="annot"><a href="Unison.Codebase.Editor.SlurpComponent.html#intersection"><span class="hs-identifier hs-type">intersection</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621681976534"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Unison.Codebase.Editor.SlurpComponent.html#SlurpComponent"><span class="hs-identifier hs-type">SlurpComponent</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681976534"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Unison.Codebase.Editor.SlurpComponent.html#SlurpComponent"><span class="hs-identifier hs-type">SlurpComponent</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681976534"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Unison.Codebase.Editor.SlurpComponent.html#SlurpComponent"><span class="hs-identifier hs-type">SlurpComponent</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681976534"><span class="hs-identifier hs-type">v</span></a></span></span><span>
</span><span id="line-32"></span><span id="intersection"><span class="annot"><span class="annottext">intersection :: SlurpComponent v -&gt; SlurpComponent v -&gt; SlurpComponent v
</span><a href="Unison.Codebase.Editor.SlurpComponent.html#intersection"><span class="hs-identifier hs-var hs-var">intersection</span></a></span></span><span> </span><span id="local-6989586621681976532"><span class="annot"><span class="annottext">SlurpComponent v
</span><a href="#local-6989586621681976532"><span class="hs-identifier hs-var">c1</span></a></span></span><span> </span><span id="local-6989586621681976531"><span class="annot"><span class="annottext">SlurpComponent v
</span><a href="#local-6989586621681976531"><span class="hs-identifier hs-var">c2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set v -&gt; Set v -&gt; SlurpComponent v
forall v. Set v -&gt; Set v -&gt; SlurpComponent v
</span><a href="Unison.Codebase.Editor.SlurpComponent.html#SlurpComponent"><span class="hs-identifier hs-var">SlurpComponent</span></a></span><span> </span><span class="annot"><span class="annottext">Set v
</span><a href="#local-6989586621681976530"><span class="hs-identifier hs-var">types'</span></a></span><span> </span><span class="annot"><span class="annottext">Set v
</span><a href="#local-6989586621681976529"><span class="hs-identifier hs-var">terms'</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-33"></span><span>  </span><span id="local-6989586621681976530"><span class="annot"><span class="annottext">types' :: Set v
</span><a href="#local-6989586621681976530"><span class="hs-identifier hs-var hs-var">types'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SlurpComponent v -&gt; Set v
forall v. SlurpComponent v -&gt; Set v
</span><a href="Unison.Codebase.Editor.SlurpComponent.html#types"><span class="hs-identifier hs-var hs-var">types</span></a></span><span> </span><span class="annot"><span class="annottext">SlurpComponent v
</span><a href="#local-6989586621681976532"><span class="hs-identifier hs-var">c1</span></a></span><span> </span><span class="annot"><span class="annottext">Set v -&gt; Set v -&gt; Set v
forall a. Ord a =&gt; Set a -&gt; Set a -&gt; Set a
</span><span class="hs-operator hs-var">`Set.intersection`</span></span><span> </span><span class="annot"><span class="annottext">SlurpComponent v -&gt; Set v
forall v. SlurpComponent v -&gt; Set v
</span><a href="Unison.Codebase.Editor.SlurpComponent.html#types"><span class="hs-identifier hs-var hs-var">types</span></a></span><span> </span><span class="annot"><span class="annottext">SlurpComponent v
</span><a href="#local-6989586621681976531"><span class="hs-identifier hs-var">c2</span></a></span><span>
</span><span id="line-34"></span><span>  </span><span id="local-6989586621681976529"><span class="annot"><span class="annottext">terms' :: Set v
</span><a href="#local-6989586621681976529"><span class="hs-identifier hs-var hs-var">terms'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SlurpComponent v -&gt; Set v
forall v. SlurpComponent v -&gt; Set v
</span><a href="Unison.Codebase.Editor.SlurpComponent.html#terms"><span class="hs-identifier hs-var hs-var">terms</span></a></span><span> </span><span class="annot"><span class="annottext">SlurpComponent v
</span><a href="#local-6989586621681976532"><span class="hs-identifier hs-var">c1</span></a></span><span> </span><span class="annot"><span class="annottext">Set v -&gt; Set v -&gt; Set v
forall a. Ord a =&gt; Set a -&gt; Set a -&gt; Set a
</span><span class="hs-operator hs-var">`Set.intersection`</span></span><span> </span><span class="annot"><span class="annottext">SlurpComponent v -&gt; Set v
forall v. SlurpComponent v -&gt; Set v
</span><a href="Unison.Codebase.Editor.SlurpComponent.html#terms"><span class="hs-identifier hs-var hs-var">terms</span></a></span><span> </span><span class="annot"><span class="annottext">SlurpComponent v
</span><a href="#local-6989586621681976531"><span class="hs-identifier hs-var">c2</span></a></span><span>
</span><span id="line-35"></span><span>
</span><span id="line-36"></span><span id="local-6989586621681976527"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621681976522"><span id="local-6989586621681976524"><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621681976527"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Semigroup</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Codebase.Editor.SlurpComponent.html#SlurpComponent"><span class="hs-identifier hs-type">SlurpComponent</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681976527"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621681976520"><span class="annot"><span class="annottext">&lt;&gt; :: SlurpComponent v -&gt; SlurpComponent v -&gt; SlurpComponent v
</span><span class="hs-operator hs-var hs-var hs-var hs-var">(&lt;&gt;)</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SlurpComponent v -&gt; SlurpComponent v -&gt; SlurpComponent v
forall a. Monoid a =&gt; a -&gt; a -&gt; a
</span><span class="hs-identifier hs-var">mappend</span></span></span><span>
</span><span id="line-37"></span><span id="local-6989586621681976519"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621681976514"><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621681976519"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monoid</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Codebase.Editor.SlurpComponent.html#SlurpComponent"><span class="hs-identifier hs-type">SlurpComponent</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681976519"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-38"></span><span>  </span><span id="local-6989586621681976512"><span class="annot"><span class="annottext">mempty :: SlurpComponent v
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">mempty</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set v -&gt; Set v -&gt; SlurpComponent v
forall v. Set v -&gt; Set v -&gt; SlurpComponent v
</span><a href="Unison.Codebase.Editor.SlurpComponent.html#SlurpComponent"><span class="hs-identifier hs-var">SlurpComponent</span></a></span><span> </span><span class="annot"><span class="annottext">Set v
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span> </span><span class="annot"><span class="annottext">Set v
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-39"></span><span>  </span><span id="local-6989586621681976511"><span class="annot"><span class="annottext">SlurpComponent v
</span><a href="#local-6989586621681976511"><span class="hs-identifier hs-var">c1</span></a></span></span><span> </span><span id="local-6989586621681976510"><span class="annot"><span class="annottext">mappend :: SlurpComponent v -&gt; SlurpComponent v -&gt; SlurpComponent v
</span><span class="hs-operator hs-var hs-var hs-var hs-var">`mappend`</span></span></span><span> </span><span id="local-6989586621681976509"><span class="annot"><span class="annottext">SlurpComponent v
</span><a href="#local-6989586621681976509"><span class="hs-identifier hs-var">c2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set v -&gt; Set v -&gt; SlurpComponent v
forall v. Set v -&gt; Set v -&gt; SlurpComponent v
</span><a href="Unison.Codebase.Editor.SlurpComponent.html#SlurpComponent"><span class="hs-identifier hs-var">SlurpComponent</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SlurpComponent v -&gt; Set v
forall v. SlurpComponent v -&gt; Set v
</span><a href="Unison.Codebase.Editor.SlurpComponent.html#types"><span class="hs-identifier hs-var hs-var">types</span></a></span><span> </span><span class="annot"><span class="annottext">SlurpComponent v
</span><a href="#local-6989586621681976511"><span class="hs-identifier hs-var">c1</span></a></span><span> </span><span class="annot"><span class="annottext">Set v -&gt; Set v -&gt; Set v
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">SlurpComponent v -&gt; Set v
forall v. SlurpComponent v -&gt; Set v
</span><a href="Unison.Codebase.Editor.SlurpComponent.html#types"><span class="hs-identifier hs-var hs-var">types</span></a></span><span> </span><span class="annot"><span class="annottext">SlurpComponent v
</span><a href="#local-6989586621681976509"><span class="hs-identifier hs-var">c2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-40"></span><span>                                   </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SlurpComponent v -&gt; Set v
forall v. SlurpComponent v -&gt; Set v
</span><a href="Unison.Codebase.Editor.SlurpComponent.html#terms"><span class="hs-identifier hs-var hs-var">terms</span></a></span><span> </span><span class="annot"><span class="annottext">SlurpComponent v
</span><a href="#local-6989586621681976511"><span class="hs-identifier hs-var">c1</span></a></span><span> </span><span class="annot"><span class="annottext">Set v -&gt; Set v -&gt; Set v
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">SlurpComponent v -&gt; Set v
forall v. SlurpComponent v -&gt; Set v
</span><a href="Unison.Codebase.Editor.SlurpComponent.html#terms"><span class="hs-identifier hs-var hs-var">terms</span></a></span><span> </span><span class="annot"><span class="annottext">SlurpComponent v
</span><a href="#local-6989586621681976509"><span class="hs-identifier hs-var">c2</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-41"></span><span>
</span><span id="line-42"></span><span>
</span><span id="line-43"></span><span class="hs-comment">-- I'm calling this `closeWithDependencies` because it doesn't just compute</span><span>
</span><span id="line-44"></span><span class="hs-comment">-- the dependencies of the inputs, it mixes them together.  Make sure this</span><span>
</span><span id="line-45"></span><span class="hs-comment">-- is what you want.</span><span>
</span><span id="line-46"></span><span class="annot"><a href="Unison.Codebase.Editor.SlurpComponent.html#closeWithDependencies"><span class="hs-identifier hs-type">closeWithDependencies</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621681976507"><span class="annot"><a href="#local-6989586621681976507"><span class="hs-identifier hs-type">v</span></a></span></span><span> </span><span id="local-6989586621681976506"><span class="annot"><a href="#local-6989586621681976506"><span class="hs-identifier hs-type">a</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621681976507"><span class="hs-identifier hs-type">v</span></a></span><span>
</span><span id="line-47"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Unison.UnisonFile.Type.html#TypecheckedUnisonFile"><span class="hs-identifier hs-type">TypecheckedUnisonFile</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681976507"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681976506"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Unison.Codebase.Editor.SlurpComponent.html#SlurpComponent"><span class="hs-identifier hs-type">SlurpComponent</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681976507"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Unison.Codebase.Editor.SlurpComponent.html#SlurpComponent"><span class="hs-identifier hs-type">SlurpComponent</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681976507"><span class="hs-identifier hs-type">v</span></a></span><span>
</span><span id="line-48"></span><span id="closeWithDependencies"><span class="annot"><span class="annottext">closeWithDependencies :: TypecheckedUnisonFile v a -&gt; SlurpComponent v -&gt; SlurpComponent v
</span><a href="Unison.Codebase.Editor.SlurpComponent.html#closeWithDependencies"><span class="hs-identifier hs-var hs-var">closeWithDependencies</span></a></span></span><span> </span><span id="local-6989586621681976505"><span class="annot"><span class="annottext">TypecheckedUnisonFile v a
</span><a href="#local-6989586621681976505"><span class="hs-identifier hs-var">uf</span></a></span></span><span> </span><span id="local-6989586621681976504"><span class="annot"><span class="annottext">SlurpComponent v
</span><a href="#local-6989586621681976504"><span class="hs-identifier hs-var">inputs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SlurpComponent v
</span><a href="#local-6989586621681976503"><span class="hs-identifier hs-var">seenDefns</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-49"></span><span>  </span><span id="local-6989586621681976503"><span class="annot"><span class="annottext">seenDefns :: SlurpComponent v
</span><a href="#local-6989586621681976503"><span class="hs-identifier hs-var hs-var">seenDefns</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(SlurpComponent v -&gt; v -&gt; SlurpComponent v)
-&gt; SlurpComponent v -&gt; Set v -&gt; SlurpComponent v
forall (t :: * -&gt; *) b a.
Foldable t =&gt;
(b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><span class="hs-identifier hs-var">foldl'</span></span><span> </span><span class="annot"><span class="annottext">SlurpComponent v -&gt; v -&gt; SlurpComponent v
</span><a href="#local-6989586621681976501"><span class="hs-identifier hs-var">termDeps</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Set v -&gt; Set v -&gt; SlurpComponent v
forall v. Set v -&gt; Set v -&gt; SlurpComponent v
</span><a href="Unison.Codebase.Editor.SlurpComponent.html#SlurpComponent"><span class="hs-identifier hs-var">SlurpComponent</span></a></span><span> </span><span class="annot"><span class="annottext">Set v
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span> </span><span class="annot"><span class="annottext">Set v
</span><a href="#local-6989586621681976500"><span class="hs-identifier hs-var">seenTypes</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SlurpComponent v -&gt; Set v
forall v. SlurpComponent v -&gt; Set v
</span><a href="Unison.Codebase.Editor.SlurpComponent.html#terms"><span class="hs-identifier hs-var hs-var">terms</span></a></span><span> </span><span class="annot"><span class="annottext">SlurpComponent v
</span><a href="#local-6989586621681976504"><span class="hs-identifier hs-var">inputs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-50"></span><span>  </span><span id="local-6989586621681976500"><span class="annot"><span class="annottext">seenTypes :: Set v
</span><a href="#local-6989586621681976500"><span class="hs-identifier hs-var hs-var">seenTypes</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Set v -&gt; v -&gt; Set v) -&gt; Set v -&gt; Set v -&gt; Set v
forall (t :: * -&gt; *) b a.
Foldable t =&gt;
(b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><span class="hs-identifier hs-var">foldl'</span></span><span> </span><span class="annot"><span class="annottext">Set v -&gt; v -&gt; Set v
</span><a href="#local-6989586621681976499"><span class="hs-identifier hs-var">typeDeps</span></a></span><span> </span><span class="annot"><span class="annottext">Set v
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SlurpComponent v -&gt; Set v
forall v. SlurpComponent v -&gt; Set v
</span><a href="Unison.Codebase.Editor.SlurpComponent.html#types"><span class="hs-identifier hs-var hs-var">types</span></a></span><span> </span><span class="annot"><span class="annottext">SlurpComponent v
</span><a href="#local-6989586621681976504"><span class="hs-identifier hs-var">inputs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-51"></span><span>
</span><span id="line-52"></span><span>  </span><span class="annot"><a href="#local-6989586621681976501"><span class="hs-identifier hs-type">termDeps</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Unison.Codebase.Editor.SlurpComponent.html#SlurpComponent"><span class="hs-identifier hs-type">SlurpComponent</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681976507"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681976507"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Unison.Codebase.Editor.SlurpComponent.html#SlurpComponent"><span class="hs-identifier hs-type">SlurpComponent</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681976507"><span class="hs-identifier hs-type">v</span></a></span><span>
</span><span id="line-53"></span><span>  </span><span id="local-6989586621681976501"><span class="annot"><span class="annottext">termDeps :: SlurpComponent v -&gt; v -&gt; SlurpComponent v
</span><a href="#local-6989586621681976501"><span class="hs-identifier hs-var hs-var">termDeps</span></a></span></span><span> </span><span id="local-6989586621681976498"><span class="annot"><span class="annottext">SlurpComponent v
</span><a href="#local-6989586621681976498"><span class="hs-identifier hs-var">seen</span></a></span></span><span> </span><span id="local-6989586621681976497"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621681976497"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">v -&gt; Set v -&gt; Bool
forall a. Ord a =&gt; a -&gt; Set a -&gt; Bool
</span><span class="hs-identifier hs-var">Set.member</span></span><span> </span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621681976497"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SlurpComponent v -&gt; Set v
forall v. SlurpComponent v -&gt; Set v
</span><a href="Unison.Codebase.Editor.SlurpComponent.html#terms"><span class="hs-identifier hs-var hs-var">terms</span></a></span><span> </span><span class="annot"><span class="annottext">SlurpComponent v
</span><a href="#local-6989586621681976498"><span class="hs-identifier hs-var">seen</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SlurpComponent v
</span><a href="#local-6989586621681976498"><span class="hs-identifier hs-var">seen</span></a></span><span>
</span><span id="line-54"></span><span>  </span><span class="annot"><a href="#local-6989586621681976501"><span class="hs-identifier hs-var">termDeps</span></a></span><span> </span><span id="local-6989586621681976495"><span class="annot"><span class="annottext">SlurpComponent v
</span><a href="#local-6989586621681976495"><span class="hs-identifier hs-var">seen</span></a></span></span><span> </span><span id="local-6989586621681976494"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621681976494"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SlurpComponent v -&gt; Maybe (SlurpComponent v) -&gt; SlurpComponent v
forall a. a -&gt; Maybe a -&gt; a
</span><span class="hs-identifier hs-var">fromMaybe</span></span><span> </span><span class="annot"><span class="annottext">SlurpComponent v
</span><a href="#local-6989586621681976495"><span class="hs-identifier hs-var">seen</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe (SlurpComponent v) -&gt; SlurpComponent v)
-&gt; Maybe (SlurpComponent v) -&gt; SlurpComponent v
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-55"></span><span>    </span><span id="local-6989586621681976492"><span class="annot"><span class="annottext">Term v a
</span><a href="#local-6989586621681976492"><span class="hs-identifier hs-var">term</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">v -&gt; Maybe (Term v a)
</span><a href="#local-6989586621681976491"><span class="hs-identifier hs-var">findTerm</span></a></span><span> </span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621681976494"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-56"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span class="hs-comment">-- get the `v`s for the transitive dependency types</span><span>
</span><span id="line-57"></span><span>        </span><span class="hs-comment">-- (the ones for terms are just the `freeVars below`)</span><span>
</span><span id="line-58"></span><span>        </span><span class="hs-comment">-- although this isn't how you'd do it for a term that's already in codebase</span><span>
</span><span id="line-59"></span><span>        </span><span class="annot"><a href="#local-6989586621681976490"><span class="hs-identifier hs-type">tdeps</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621681976507"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-60"></span><span>        </span><span id="local-6989586621681976490"><span class="annot"><span class="annottext">tdeps :: [v]
</span><a href="#local-6989586621681976490"><span class="hs-identifier hs-var hs-var">tdeps</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set Reference -&gt; [v]
</span><a href="#local-6989586621681976489"><span class="hs-identifier hs-var">resolveTypes</span></a></span><span> </span><span class="annot"><span class="annottext">(Set Reference -&gt; [v]) -&gt; Set Reference -&gt; [v]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Term v a -&gt; Set Reference
forall v vt at ap a.
(Ord v, Ord vt) =&gt;
Term2 vt at ap v a -&gt; Set Reference
</span><span class="hs-identifier hs-var">Term.dependencies</span></span><span> </span><span class="annot"><span class="annottext">Term v a
</span><a href="#local-6989586621681976492"><span class="hs-identifier hs-var">term</span></a></span><span>
</span><span id="line-61"></span><span>        </span><span class="annot"><a href="#local-6989586621681976487"><span class="hs-identifier hs-type">seenTypes</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Set</span></span><span> </span><span class="annot"><a href="#local-6989586621681976507"><span class="hs-identifier hs-type">v</span></a></span><span>
</span><span id="line-62"></span><span>        </span><span id="local-6989586621681976487"><span class="annot"><span class="annottext">seenTypes :: Set v
</span><a href="#local-6989586621681976487"><span class="hs-identifier hs-var hs-var">seenTypes</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Set v -&gt; v -&gt; Set v) -&gt; Set v -&gt; [v] -&gt; Set v
forall (t :: * -&gt; *) b a.
Foldable t =&gt;
(b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><span class="hs-identifier hs-var">foldl'</span></span><span> </span><span class="annot"><span class="annottext">Set v -&gt; v -&gt; Set v
</span><a href="#local-6989586621681976499"><span class="hs-identifier hs-var">typeDeps</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SlurpComponent v -&gt; Set v
forall v. SlurpComponent v -&gt; Set v
</span><a href="Unison.Codebase.Editor.SlurpComponent.html#types"><span class="hs-identifier hs-var hs-var">types</span></a></span><span> </span><span class="annot"><span class="annottext">SlurpComponent v
</span><a href="#local-6989586621681976495"><span class="hs-identifier hs-var">seen</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621681976490"><span class="hs-identifier hs-var">tdeps</span></a></span><span>
</span><span id="line-63"></span><span>        </span><span id="local-6989586621681976486"><span class="annot"><span class="annottext">seenTerms :: Set v
</span><a href="#local-6989586621681976486"><span class="hs-identifier hs-var hs-var">seenTerms</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">v -&gt; Set v -&gt; Set v
forall a. Ord a =&gt; a -&gt; Set a -&gt; Set a
</span><span class="hs-identifier hs-var">Set.insert</span></span><span> </span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621681976494"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SlurpComponent v -&gt; Set v
forall v. SlurpComponent v -&gt; Set v
</span><a href="Unison.Codebase.Editor.SlurpComponent.html#terms"><span class="hs-identifier hs-var hs-var">terms</span></a></span><span> </span><span class="annot"><span class="annottext">SlurpComponent v
</span><a href="#local-6989586621681976495"><span class="hs-identifier hs-var">seen</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-64"></span><span>    </span><span class="annot"><span class="annottext">SlurpComponent v -&gt; Maybe (SlurpComponent v)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(SlurpComponent v -&gt; Maybe (SlurpComponent v))
-&gt; SlurpComponent v -&gt; Maybe (SlurpComponent v)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(SlurpComponent v -&gt; v -&gt; SlurpComponent v)
-&gt; SlurpComponent v -&gt; Set v -&gt; SlurpComponent v
forall (t :: * -&gt; *) b a.
Foldable t =&gt;
(b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><span class="hs-identifier hs-var">foldl'</span></span><span> </span><span class="annot"><span class="annottext">SlurpComponent v -&gt; v -&gt; SlurpComponent v
</span><a href="#local-6989586621681976501"><span class="hs-identifier hs-var">termDeps</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SlurpComponent v
</span><a href="#local-6989586621681976495"><span class="hs-identifier hs-var">seen</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">types :: Set v
</span><a href="Unison.Codebase.Editor.SlurpComponent.html#types"><span class="hs-identifier hs-var">types</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set v
</span><a href="#local-6989586621681976487"><span class="hs-identifier hs-var">seenTypes</span></a></span><span>
</span><span id="line-65"></span><span>                                 </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">terms :: Set v
</span><a href="Unison.Codebase.Editor.SlurpComponent.html#terms"><span class="hs-identifier hs-var">terms</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set v
</span><a href="#local-6989586621681976486"><span class="hs-identifier hs-var">seenTerms</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-66"></span><span>                           </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term v a -&gt; Set v
forall vt v a. Term' vt v a -&gt; Set v
</span><span class="hs-identifier hs-var">Term.freeVars</span></span><span> </span><span class="annot"><span class="annottext">Term v a
</span><a href="#local-6989586621681976492"><span class="hs-identifier hs-var">term</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-67"></span><span>
</span><span id="line-68"></span><span>  </span><span class="annot"><a href="#local-6989586621681976499"><span class="hs-identifier hs-type">typeDeps</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Set</span></span><span> </span><span class="annot"><a href="#local-6989586621681976507"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681976507"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Set</span></span><span> </span><span class="annot"><a href="#local-6989586621681976507"><span class="hs-identifier hs-type">v</span></a></span><span>
</span><span id="line-69"></span><span>  </span><span id="local-6989586621681976499"><span class="annot"><span class="annottext">typeDeps :: Set v -&gt; v -&gt; Set v
</span><a href="#local-6989586621681976499"><span class="hs-identifier hs-var hs-var">typeDeps</span></a></span></span><span> </span><span id="local-6989586621681976483"><span class="annot"><span class="annottext">Set v
</span><a href="#local-6989586621681976483"><span class="hs-identifier hs-var">seen</span></a></span></span><span> </span><span id="local-6989586621681976482"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621681976482"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">v -&gt; Set v -&gt; Bool
forall a. Ord a =&gt; a -&gt; Set a -&gt; Bool
</span><span class="hs-identifier hs-var">Set.member</span></span><span> </span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621681976482"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">Set v
</span><a href="#local-6989586621681976483"><span class="hs-identifier hs-var">seen</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set v
</span><a href="#local-6989586621681976483"><span class="hs-identifier hs-var">seen</span></a></span><span>
</span><span id="line-70"></span><span>  </span><span class="annot"><a href="#local-6989586621681976499"><span class="hs-identifier hs-var">typeDeps</span></a></span><span> </span><span id="local-6989586621681976481"><span class="annot"><span class="annottext">Set v
</span><a href="#local-6989586621681976481"><span class="hs-identifier hs-var">seen</span></a></span></span><span> </span><span id="local-6989586621681976480"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621681976480"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set v -&gt; Maybe (Set v) -&gt; Set v
forall a. a -&gt; Maybe a -&gt; a
</span><span class="hs-identifier hs-var">fromMaybe</span></span><span> </span><span class="annot"><span class="annottext">Set v
</span><a href="#local-6989586621681976481"><span class="hs-identifier hs-var">seen</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe (Set v) -&gt; Set v) -&gt; Maybe (Set v) -&gt; Set v
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-71"></span><span>    </span><span id="local-6989586621681976479"><span class="annot"><span class="annottext">DataDeclaration v a
</span><a href="#local-6989586621681976479"><span class="hs-identifier hs-var">dd</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">((Reference, DataDeclaration v a) -&gt; DataDeclaration v a)
-&gt; Maybe (Reference, DataDeclaration v a)
-&gt; Maybe (DataDeclaration v a)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">(Reference, DataDeclaration v a) -&gt; DataDeclaration v a
forall a b. (a, b) -&gt; b
</span><span class="hs-identifier hs-var">snd</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">v
-&gt; Map v (Reference, DataDeclaration v a)
-&gt; Maybe (Reference, DataDeclaration v a)
forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Map.lookup</span></span><span> </span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621681976480"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TypecheckedUnisonFile v a -&gt; Map v (Reference, DataDeclaration v a)
forall v a.
TypecheckedUnisonFile v a -&gt; Map v (Reference, DataDeclaration v a)
</span><a href="Unison.UnisonFile.html#dataDeclarations%27"><span class="hs-identifier hs-var">UF.dataDeclarations'</span></a></span><span> </span><span class="annot"><span class="annottext">TypecheckedUnisonFile v a
</span><a href="#local-6989586621681976505"><span class="hs-identifier hs-var">uf</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe (DataDeclaration v a)
-&gt; Maybe (DataDeclaration v a) -&gt; Maybe (DataDeclaration v a)
forall (f :: * -&gt; *) a. Alternative f =&gt; f a -&gt; f a -&gt; f a
</span><span class="hs-operator hs-var">&lt;|&gt;</span></span><span>
</span><span id="line-72"></span><span>          </span><span class="annot"><span class="annottext">((Reference, EffectDeclaration v a) -&gt; DataDeclaration v a)
-&gt; Maybe (Reference, EffectDeclaration v a)
-&gt; Maybe (DataDeclaration v a)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EffectDeclaration v a -&gt; DataDeclaration v a
forall v a. EffectDeclaration v a -&gt; DataDeclaration v a
</span><span class="hs-identifier hs-var hs-var">DD.toDataDecl</span></span><span> </span><span class="annot"><span class="annottext">(EffectDeclaration v a -&gt; DataDeclaration v a)
-&gt; ((Reference, EffectDeclaration v a) -&gt; EffectDeclaration v a)
-&gt; (Reference, EffectDeclaration v a)
-&gt; DataDeclaration v a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Reference, EffectDeclaration v a) -&gt; EffectDeclaration v a
forall a b. (a, b) -&gt; b
</span><span class="hs-identifier hs-var">snd</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">v
-&gt; Map v (Reference, EffectDeclaration v a)
-&gt; Maybe (Reference, EffectDeclaration v a)
forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Map.lookup</span></span><span> </span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621681976480"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TypecheckedUnisonFile v a
-&gt; Map v (Reference, EffectDeclaration v a)
forall v a.
TypecheckedUnisonFile v a
-&gt; Map v (Reference, EffectDeclaration v a)
</span><a href="Unison.UnisonFile.html#effectDeclarations%27"><span class="hs-identifier hs-var">UF.effectDeclarations'</span></a></span><span> </span><span class="annot"><span class="annottext">TypecheckedUnisonFile v a
</span><a href="#local-6989586621681976505"><span class="hs-identifier hs-var">uf</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-73"></span><span>    </span><span class="hs-identifier">pure</span><span> </span><span class="hs-operator">$</span><span> </span><span class="annot"><span class="annottext">(Set v -&gt; v -&gt; Set v) -&gt; Set v -&gt; [v] -&gt; Set v
forall (t :: * -&gt; *) b a.
Foldable t =&gt;
(b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><span class="hs-identifier hs-var">foldl'</span></span><span> </span><span class="annot"><span class="annottext">Set v -&gt; v -&gt; Set v
</span><a href="#local-6989586621681976499"><span class="hs-identifier hs-var">typeDeps</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">v -&gt; Set v -&gt; Set v
forall a. Ord a =&gt; a -&gt; Set a -&gt; Set a
</span><span class="hs-identifier hs-var">Set.insert</span></span><span> </span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621681976480"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">Set v
</span><a href="#local-6989586621681976481"><span class="hs-identifier hs-var">seen</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Set Reference -&gt; [v]
</span><a href="#local-6989586621681976489"><span class="hs-identifier hs-var">resolveTypes</span></a></span><span> </span><span class="annot"><span class="annottext">(Set Reference -&gt; [v]) -&gt; Set Reference -&gt; [v]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">DataDeclaration v a -&gt; Set Reference
forall v a. Ord v =&gt; DataDeclaration v a -&gt; Set Reference
</span><span class="hs-identifier hs-var">DD.dependencies</span></span><span> </span><span class="annot"><span class="annottext">DataDeclaration v a
</span><a href="#local-6989586621681976479"><span class="hs-identifier hs-var">dd</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-74"></span><span>
</span><span id="line-75"></span><span>  </span><span class="annot"><a href="#local-6989586621681976489"><span class="hs-identifier hs-type">resolveTypes</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Set</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Reference</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621681976507"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-76"></span><span>  </span><span id="local-6989586621681976489"><span class="annot"><span class="annottext">resolveTypes :: Set Reference -&gt; [v]
</span><a href="#local-6989586621681976489"><span class="hs-identifier hs-var hs-var">resolveTypes</span></a></span></span><span> </span><span id="local-6989586621681976471"><span class="annot"><span class="annottext">Set Reference
</span><a href="#local-6989586621681976471"><span class="hs-identifier hs-var">rs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621681976470"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621681976469"><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681976469"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Set Reference -&gt; [Reference]
forall a. Set a -&gt; [a]
</span><span class="hs-identifier hs-var">Set.toList</span></span><span> </span><span class="annot"><span class="annottext">Set Reference
</span><a href="#local-6989586621681976471"><span class="hs-identifier hs-var">rs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621681976470"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621681976470"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Reference -&gt; Map Reference v -&gt; Maybe v
forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Map.lookup</span></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681976469"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">Map Reference v
</span><a href="#local-6989586621681976467"><span class="hs-identifier hs-var">typeNames</span></a></span><span class="hs-special">]</span><span class="hs-special">]</span><span>
</span><span id="line-77"></span><span>
</span><span id="line-78"></span><span>  </span><span class="annot"><a href="#local-6989586621681976491"><span class="hs-identifier hs-type">findTerm</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621681976507"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Term.Term</span></span><span> </span><span class="annot"><a href="#local-6989586621681976507"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681976506"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-79"></span><span>  </span><span id="local-6989586621681976491"><span class="annot"><span class="annottext">findTerm :: v -&gt; Maybe (Term v a)
</span><a href="#local-6989586621681976491"><span class="hs-identifier hs-var hs-var">findTerm</span></a></span></span><span> </span><span id="local-6989586621681976466"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621681976466"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">v -&gt; Map v (Term v a) -&gt; Maybe (Term v a)
forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Map.lookup</span></span><span> </span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621681976466"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">Map v (Term v a)
</span><a href="#local-6989586621681976465"><span class="hs-identifier hs-var">allTerms</span></a></span><span>
</span><span id="line-80"></span><span>
</span><span id="line-81"></span><span>  </span><span id="local-6989586621681976465"><span class="annot"><span class="annottext">allTerms :: Map v (Term v a)
</span><a href="#local-6989586621681976465"><span class="hs-identifier hs-var hs-var">allTerms</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TypecheckedUnisonFile v a -&gt; Map v (Term v a)
forall v a. Ord v =&gt; TypecheckedUnisonFile v a -&gt; Map v (Term v a)
</span><a href="Unison.UnisonFile.html#allTerms"><span class="hs-identifier hs-var">UF.allTerms</span></a></span><span> </span><span class="annot"><span class="annottext">TypecheckedUnisonFile v a
</span><a href="#local-6989586621681976505"><span class="hs-identifier hs-var">uf</span></a></span><span>
</span><span id="line-82"></span><span>
</span><span id="line-83"></span><span>  </span><span class="annot"><a href="#local-6989586621681976467"><span class="hs-identifier hs-type">typeNames</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Reference</span></span><span> </span><span class="annot"><a href="#local-6989586621681976507"><span class="hs-identifier hs-type">v</span></a></span><span>
</span><span id="line-84"></span><span>  </span><span id="local-6989586621681976467"><span class="annot"><span class="annottext">typeNames :: Map Reference v
</span><a href="#local-6989586621681976467"><span class="hs-identifier hs-var hs-var">typeNames</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map v Reference -&gt; Map Reference v
forall k v. (Ord k, Ord v) =&gt; Map k v -&gt; Map v k
</span><a href="#local-6989586621681976463"><span class="hs-identifier hs-var">invert</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Reference, DataDeclaration v a) -&gt; Reference
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span> </span><span class="annot"><span class="annottext">((Reference, DataDeclaration v a) -&gt; Reference)
-&gt; Map v (Reference, DataDeclaration v a) -&gt; Map v Reference
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">TypecheckedUnisonFile v a -&gt; Map v (Reference, DataDeclaration v a)
forall v a.
TypecheckedUnisonFile v a -&gt; Map v (Reference, DataDeclaration v a)
</span><a href="Unison.UnisonFile.html#dataDeclarations%27"><span class="hs-identifier hs-var">UF.dataDeclarations'</span></a></span><span> </span><span class="annot"><span class="annottext">TypecheckedUnisonFile v a
</span><a href="#local-6989586621681976505"><span class="hs-identifier hs-var">uf</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Map Reference v -&gt; Map Reference v -&gt; Map Reference v
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Map v Reference -&gt; Map Reference v
forall k v. (Ord k, Ord v) =&gt; Map k v -&gt; Map v k
</span><a href="#local-6989586621681976463"><span class="hs-identifier hs-var">invert</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Reference, EffectDeclaration v a) -&gt; Reference
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span> </span><span class="annot"><span class="annottext">((Reference, EffectDeclaration v a) -&gt; Reference)
-&gt; Map v (Reference, EffectDeclaration v a) -&gt; Map v Reference
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">TypecheckedUnisonFile v a
-&gt; Map v (Reference, EffectDeclaration v a)
forall v a.
TypecheckedUnisonFile v a
-&gt; Map v (Reference, EffectDeclaration v a)
</span><a href="Unison.UnisonFile.html#effectDeclarations%27"><span class="hs-identifier hs-var">UF.effectDeclarations'</span></a></span><span> </span><span class="annot"><span class="annottext">TypecheckedUnisonFile v a
</span><a href="#local-6989586621681976505"><span class="hs-identifier hs-var">uf</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-85"></span><span>
</span><span id="line-86"></span><span>  </span><span class="annot"><a href="#local-6989586621681976463"><span class="hs-identifier hs-type">invert</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621681976595"><span class="annot"><a href="#local-6989586621681976595"><span class="hs-identifier hs-type">k</span></a></span></span><span> </span><span id="local-6989586621681976594"><span class="annot"><a href="#local-6989586621681976594"><span class="hs-identifier hs-type">v</span></a></span></span><span> </span><span class="hs-operator">.</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621681976595"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621681976594"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="annot"><a href="#local-6989586621681976595"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681976594"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="annot"><a href="#local-6989586621681976594"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681976595"><span class="hs-identifier hs-type">k</span></a></span><span>
</span><span id="line-87"></span><span>  </span><span id="local-6989586621681976463"><span class="annot"><span class="annottext">invert :: Map k v -&gt; Map v k
</span><a href="#local-6989586621681976463"><span class="hs-identifier hs-var hs-var">invert</span></a></span></span><span> </span><span id="local-6989586621681976461"><span class="annot"><span class="annottext">Map k v
</span><a href="#local-6989586621681976461"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[(v, k)] -&gt; Map v k
forall k a. Ord k =&gt; [(k, a)] -&gt; Map k a
</span><span class="hs-identifier hs-var">Map.fromList</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(k, v) -&gt; (v, k)
forall a b. (a, b) -&gt; (b, a)
</span><span class="hs-identifier hs-var">swap</span></span><span> </span><span class="annot"><span class="annottext">((k, v) -&gt; (v, k)) -&gt; [(k, v)] -&gt; [(v, k)]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Map k v -&gt; [(k, v)]
forall k a. Map k a -&gt; [(k, a)]
</span><span class="hs-identifier hs-var">Map.toList</span></span><span> </span><span class="annot"><span class="annottext">Map k v
</span><a href="#local-6989586621681976461"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-88"></span></pre></body></html>